define(['jquery','underscore','uiComponent'],function($,_,Component){'use strict';return Component.extend({defaults:{content:'',showSpinner:false,loading:false,template:'ui/content/content'},initialize:function(){_.bindAll(this,'onContainerToggle','onDataLoaded');this._super().initAjaxConfig();return this;},initObservable:function(){this._super().observe('content loading');return this;},initContainer:function(parent){this._super();parent.on('active',this.onContainerToggle);return this;},initAjaxConfig:function(){this.ajaxConfig={url:this.url,data:{FORM_KEY:window.FORM_KEY},success:this.onDataLoaded};return this;},onContainerToggle:function(active){if(active&&this.shouldLoad()){this.loadData();}},hasData:function(){return!!this.content();},shouldLoad:function(){return this.url&&!this.hasData()&&!this.loading();},loadData:function(){this.loading(true);$.ajax(this.ajaxConfig);return this;},onDataLoaded:function(data){this.updateContent(data).loading(false);},updateContent:function(content){this.content(content);return this;}});});