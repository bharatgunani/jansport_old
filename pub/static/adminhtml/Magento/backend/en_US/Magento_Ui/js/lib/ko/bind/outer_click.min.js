define(['ko','jquery','underscore'],function(ko,$,_){'use strict';var defaults={onlyIfVisible:true};function onOuterClick(container,config,e){var target=e.target,callback=config.callback;if(container===target||container.contains(target)){return;}
if(config.onlyIfVisible){if(!_.isNull(container.offsetParent)){callback();}}else{callback();}}
function buildConfig(options){var config={};if(_.isFunction(options)){options={callback:options};}else if(!_.isObject(options)){options={};}
return _.extend(config,defaults,options);}
ko.bindingHandlers.outerClick={init:function(element,valueAccessor){var config=buildConfig(valueAccessor()),outerClick=onOuterClick.bind(null,element,config);$(document).on('click',outerClick);ko.utils.domNodeDisposal.addDisposeCallback(element,function(){$(document).off('click',outerClick);});}};});