define(['underscore','Magento_Ui/js/lib/collapsible'],function(_,Collapsible){'use strict';return Collapsible.extend({defaults:{listens:{'${ $.provider }:data.validate':'onValidate'},collapsible:false,opened:true},initElement:function(elem){this._super().initActivation(elem);return this;},initActivation:function(elem){var elems=this.elems(),isFirst=!elems.indexOf(elem);if(isFirst||elem.active()){elem.activate();}
return this;},validate:function(elem){var source=this.source,result=elem.delegate('validate'),invalid=false;_.some(result,function(item){return!item.valid&&(invalid=item.target);});if(invalid&&!source.get('params.invalid')){source.set('params.invalid',true);elem.activate();invalid.focused(true);}},onValidate:function(){var elems;elems=this.elems.sortBy(function(elem){return!elem.active();});elems.forEach(this.validate,this);}});});