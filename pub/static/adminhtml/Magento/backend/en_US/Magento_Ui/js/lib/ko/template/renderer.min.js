define(['./loader','jquery','underscore'],function(loader,$,_){'use strict';return{render:function(template){var isRendered=$.Deferred(),resolve=isRendered.resolve.bind(isRendered),loadTemplate=this._load.bind(this),parseTemplate=this._parse.bind(this);loadTemplate(template).then(parseTemplate).done(resolve);return isRendered.promise();},_load:function(){return loader.loadTemplate.apply(loader,arguments);},_parse:function(rawHtml){return _.toArray($.parseHTML(rawHtml));}};});